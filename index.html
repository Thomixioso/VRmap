<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Mapa + VR</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<style>
  body { margin: 0; height: 100vh; overflow: hidden; }
  #map { height: 100%; width: 100%; }
  #vrScene {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; background: #000;
  }
  #exitVrBtn {
    display: none; position: fixed; top: 10px; right: 10px; z-index: 10000;
    padding: 10px 20px; background: #fff; border: none; cursor: pointer; font-size: 16px;
  }
</style>
</head>
<body>

<div id="map"></div>

<a-scene embedded id="vrScene" style="display:none;">
  <a-entity camera look-controls position="0 1.6 0"></a-entity>
  <a-sky id="stereoSky" color="#222"></a-sky>
</a-scene>
<button id="exitVrBtn">Zpět na mapu</button>

<script>
  // Map
  var map = L.map('map').setView([49.939, 14.188], 15);
  L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Satelitní mapa | &copy; Esri'
  }).addTo(map);

  // Jednoduchý marker
  var marker = L.marker([49.939, 14.188]).addTo(map);
  marker.bindPopup('Klikni pro VR');

  // Po kliknutí na marker
  marker.on('click', function() {
    startVR();
  });

  function startVR() {
    document.getElementById('map').style.display = 'none';
    document.getElementById('vrScene').style.display = 'block';
    document.getElementById('exitVrBtn').style.display = 'block';

    var sky = document.querySelector('#stereoSky');
    // Použij svůj stereo obrázek (side-by-side)
    var stereoImageUrl = 'https://upload.wikimedia.org/wikipedia/commons/7/7d/Karlstejn_stereo.jpg';

    sky.setAttribute('material', 'shader: flat; side: double; src: ' + stereoImageUrl);
  }

  document.getElementById('exitVrBtn').onclick = function() {
    document.getElementById('map').style.display = 'block';
    document.getElementById('vrScene').style.display = 'none';
    document.getElementById('exitVrBtn').style.display = 'none';
  };
</script>

</body>
</html>
