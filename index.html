<html>
  <head>
    <meta charset="utf-8">
    <title>180° SBS Stereo Layers</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('stereo-sbs-180', {
        schema: {src: {type: 'asset'}},
        init: function () {
          const texture = new THREE.TextureLoader().load(this.data.src);
          texture.minFilter = THREE.LinearFilter;

          // Levé oko
          const matLeft = new THREE.MeshBasicMaterial({map: texture, side: THREE.BackSide});
          matLeft.map.repeat.set(0.5, 1);
          matLeft.map.offset.set(0, 0);

          // Pravé oko
          const matRight = new THREE.MeshBasicMaterial({map: texture, side: THREE.BackSide});
          matRight.map.repeat.set(0.5, 1);
          matRight.map.offset.set(0.5, 0);

          // Geometrie polokoule
          const geom = new THREE.SphereGeometry(10, 64, 64, 0, Math.PI);

          // Mesh pro levé oko
          const meshLeft = new THREE.Mesh(geom, matLeft);
          meshLeft.layers.set(1); // levé oko

          // Mesh pro pravé oko
          const meshRight = new THREE.Mesh(geom, matRight);
          meshRight.layers.set(2); // pravé oko

          this.el.setObject3D('leftSphere', meshLeft);
          this.el.setObject3D('rightSphere', meshRight);
        }
      });
    </script>
  </head>
  <body>
    <a-scene vr-mode-ui="enabled: true" xr-webxr="referenceSpaceType: local" background="color: black">
      <a-entity stereo-sbs-180="src: Le_Castillet_generated.jpg"></a-entity>
      <a-assets>
        <img id="stereoImage" src="./Castles/generated/Le_Castillet_generated.jpg">
      </a-assets>
    </a-scene>
  </body>
</html>
